(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function l(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(e){if(e.ep)return;e.ep=!0;const o=l(e);fetch(e.href,o)}})();const f="/toDo/assets/delete-9efd5715.png",g="/toDo/assets/pencil-72ce7ac6.png",L="/toDo/assets/done-71e81321.png",y=JSON.parse(localStorage.getItem("tasks")),t=y??[];localStorage.setItem("test",JSON.stringify({jora:"pidor"}));function p(){const s=document.getElementById("taskInput"),n=s.value.trim();n!==""&&(t.unshift({text:n,completed:!1,nonVisibility:!1}),localStorage.setItem("tasks",JSON.stringify(t)),s.value="",d())}function u(){t.length===0&&(taskList.innerHTML='<p class="zaglushka">Список задач пуст</p>')}u();let r=!1;function k(){if(t.length>2&&!r){const s=document.createElement("button");s.classList.add("deleteAllButton"),s.innerHTML="Очистить список",E.append(s),r=!0,s.addEventListener("click",function(){t.splice(0,t.length),s.outerHTML="",r=!1,localStorage.setItem("tasks",JSON.stringify(t)),d(),u()})}else if(t.length<3&&r){const s=document.querySelector(".deleteAllButton");s.outerHTML="",r=!1}}function d(){const s=document.getElementById("taskList");s.innerHTML="",k();for(let n=0;n<t.length;n++){const l=document.createElement("div"),i=document.createElement("p");i.classList.add("counter");const e=document.createElement("input");e.type="text",e.value=t[n].text,e.className="task-input",e.addEventListener("input",function(){t[n].text=e.value}),e.classList.add("task"),l.append(i),l.append(e),i.textContent=`${n+1}.`,e.value=`${t[n].text}`,l.className="task-item";const o=document.createElement("img");o.src=L,o.alt="Выполнено",o.addEventListener("click",function(){if(!t[n].completed&&!t[n].nonVisibility){t[n].completed=!0,t[n].nonVisibility=!0;let m=t.splice(n,1);t.push(m[0]),localStorage.setItem("tasks",JSON.stringify(t))}d()});const a=document.createElement("img");a.src=g,a.alt="Измеить",a.addEventListener("click",()=>{t[n].completed?alert("Задача выполнена"):(a.classList.add("img_change"),e.focus(),e.value=e.value.trim(),t[n].text=e.value.trim(),localStorage.setItem("tasks",JSON.stringify(t)))});const c=document.createElement("img");c.src=f,c.alt="Удалить",c.addEventListener("click",function(){l.className="removing",c.classList.add("img_del"),setTimeout(function(){t.splice(n,1),d(),u(),localStorage.setItem("tasks",JSON.stringify(t))},600)}),t[n].completed&&t[n].nonVisibility&&(i.innerHTML="#",i.classList.add("completed"),i.classList.add("nonvis"),e.classList.add("completed"),e.classList.add("nonvis"),o.classList.add("img_done"),e.parentNode.classList.add("green")),l.appendChild(o),l.appendChild(a),l.appendChild(c),s.appendChild(l)}}const h=document.getElementById("addTask");h.addEventListener("click",p);const v=document.getElementById("taskInput");v.addEventListener("keydown",function(s){s.key==="Enter"&&(s.preventDefault(),p())});document.querySelector(".wrapper");document.querySelector(".form");const E=document.querySelector(".tasks__wrapper");d();
